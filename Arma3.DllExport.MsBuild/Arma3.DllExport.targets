<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <PostBuildEventDependsOn>
      $(PostBuildEventDependsOn);
      Arma3DllExport
    </PostBuildEventDependsOn>
  </PropertyGroup>

  <PropertyGroup>
    <BuildDependsOn>
      $(BuildDependsOn);
      Arma3DllExport
    </BuildDependsOn>
  </PropertyGroup>

  <UsingTask TaskName="Arma3.DllExport.MSBuild.ArmaDllExportTask" 
             AssemblyFile="Arma3.DllExport.MSBuild.dll" />
  
  <Target Name="Arma3DllExport" DependsOnTargets="GetFrameworkPaths">
    <PropertyGroup>
      <ArmaDllExportTargetPath Condition="'$(ArmaDllExportTargetPath)' == ''">$(TargetPath)</ArmaDllExportTargetPath>
      <ArmaDllExportFrameworkPath Condition="'$(ArmaDllExportFrameworkPath)' == ''">$(TargetedFrameworkDir)</ArmaDllExportFrameworkPath>
      <ArmaDllExportSdkPath Condition="'$(ArmaDllExportSdkPath)' == ''">$(TargetFrameworkSDKToolsDirectory)</ArmaDllExportSdkPath>
    </PropertyGroup>
    <ArmaDllExportTask FileName="$(ArmaDllExportTargetPath)"
                       FrameworkPath="$(ArmaDllExportFrameworkPath)"
                       SdkPath="$(ArmaDllExportSdkPath)"
                       WrapperNamespace="$(ArmaDllExportWrapperNamespace)"
                       WrapperTypeName="$(ArmaDllExportWrapperTypeName)"
                       WrapperMethodName="$(ArmaDllExportWrapperMethodName)"
                       KeepIl="$(ArmaDllExportKeepIl)"/>
  </Target>
</Project>